<html>
  <head>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  </head>
  <body>
    <py-script>
        ##Zonk
    import random

    class Zonk_Turn:
        def __init__(self):
            self.roll = []
            for x in range(5):
                self.roll.append(random.randint(1,6))
            self.score = 0

        def __str__(self):
            return f"{self.roll}, score = {self.score}"

        def reroll(self):
            if len(self.roll) == 0:
                for x in range(5):
                    self.roll.append(random.randint(1,6))
            else:
                for x in range(len(self.roll)):
                    self.roll[x] = random.randint(1,6)
        def lookup(self):
            dummyroll = list(self.roll)
            lookuptable = {
                1: 1000,
                2: 200,
                3: 300,
                4: 400,
                5: 500,
                6: 600
            }
            for n in range(6):
                if (dummyroll.count(n+1) >= 3):
                    self.score += lookuptable[n+1]
                    for x in range(3):
                        dummyroll.remove(n+1)
            while(1 in dummyroll or 5 in dummyroll):
                if 1 in dummyroll:
                    self.score += 100
                    dummyroll.remove(1)
                if 5 in dummyroll:
                    self.score += 50
                    dummyroll.remove(5)
            if (self.roll == dummyroll):
                self.score = 0
            else:
                self.roll = dummyroll


    players = input("How many players?\n")
    totals = [0] * int(players)
    counter = 0

    while(all(x < 5000 for x in totals)):
        print(f"PLAYER {counter%int(players)+1}'s TURN")
        if (counter > 0 and roll1.score > 0 and input("Continue previous play?\n") == "y"):
            print(roll1)
        else:
            roll1 = Zonk_Turn()
            print(roll1)
            roll1.lookup()
            print(roll1)

        while roll1.score != 0 and input("Continue?\n") == "y":
            roll1.reroll()
            print(roll1)
            x = roll1.lookup()
            print(roll1)
        if (totals[counter%int(players)] + roll1.score < 300):
            totals[counter%int(players)] = 0
        else:
            totals[counter%int(players)] += roll1.score
        print(f"{roll1}\n\nTOTAL SCORE = {totals[counter%int(players)]}\n\n\n\n")
        counter += 1




    </py-script>
  </body>
</html>
